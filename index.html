<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Ù…Ù†Ø´Ø¦ Ø§Ù„Ø­Ù‚Ø§Ø¦Ø¨ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ - Ù†Ø³Ø®Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #16a085;
            --accent: #d35400;
            --bg: #eef2f3;
            --cover-bg: #ffffff;
        }

        * { box-sizing: border-box; }

        body { 
            font-family: 'Cairo', sans-serif; 
            background: var(--bg); 
            margin: 0; 
            padding: 0; 
            /* Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù€ overflow hidden Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ ÙÙŠ Ø§Ù„Ø¬ÙˆØ§Ù„ */
            overflow-x: hidden; 
        }

        /* --- ØªØ®Ø·ÙŠØ· Ø§Ù„ØµÙØ­Ø© (Layout) --- */
        .app-container {
            display: flex;
            flex-direction: row; /* Ù„Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±: Ø¬Ù†Ø¨ Ø¨Ø¹Ø¶ */
            min-height: 100vh;
        }

        /* --- 1. Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ø§Ù„Ù…Ø­Ø±Ø±) --- */
        .editor-sidebar {
            width: 400px; /* Ø¹Ø±Ø¶ Ø«Ø§Ø¨Øª Ù„Ù„Ù…Ø­Ø±Ø± ÙÙŠ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± */
            background: white;
            padding: 20px;
            border-left: 2px solid #ddd;
            overflow-y: auto;
            height: 100vh;
            position: fixed; /* ØªØ«Ø¨ÙŠØª Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
            right: 0;
            top: 0;
            z-index: 100;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
        }

        /* --- 2. Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© --- */
        .preview-area {
            margin-right: 400px; /* ØªØ±Ùƒ Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ù…Ø­Ø±Ø± */
            width: calc(100% - 400px);
            background: #525659;
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* --- 3. ØªØµÙ…ÙŠÙ… Ø§Ù„ÙˆØ±Ù‚Ø© (A4 Sheet) --- */
        .sheet {
            background: white;
            width: 210mm;
            min-height: 297mm;
            padding: 20mm;
            margin-bottom: 30px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            position: relative;
            /* Ù…Ù†Ø¹ Ù‚Øµ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
            overflow: visible; 
            page-break-after: always; /* Ø£Ù…Ø± Ø§Ù„Ø·Ø§Ø¨Ø¹Ø© Ø¨Ø¨Ø¯Ø¡ ØµÙØ­Ø© Ø¬Ø¯ÙŠØ¯Ø© */
        }

        /* --- ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ (Responsive) --- */
        @media (max-width: 900px) {
            .app-container { flex-direction: column; }
            
            .editor-sidebar {
                width: 100%;
                height: auto;
                position: relative;
                border-left: none;
                padding-bottom: 50px;
            }

            .preview-area {
                width: 100%;
                margin-right: 0;
                padding: 10px;
                overflow-x: auto; /* Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø£ÙÙ‚ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ÙˆØ±Ù‚Ø© Ø¹Ø±ÙŠØ¶Ø© */
            }

            /* ØªØµØºÙŠØ± Ø§Ù„ÙˆØ±Ù‚Ø© Ù‚Ù„ÙŠÙ„Ø§Ù‹ ÙÙŠ Ø§Ù„Ø¬ÙˆØ§Ù„ ÙÙ‚Ø· Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© */
            .sheet {
                transform: scale(0.9);
                transform-origin: top center;
                margin-bottom: 10px;
            }
        }

        /* --- ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª (Ø¥ØµÙ„Ø§Ø­ Ø§Ù„ØªØ¯Ø§Ø®Ù„) --- */
        label {
            display: block;
            margin-top: 15px;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 14px;
            color: var(--primary);
        }

        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-family: 'Cairo';
            font-size: 14px;
            background: #f8f9fa;
            /* Ù…Ù†Ø¹ Ø§Ù„ØªØ¯Ø§Ø®Ù„ */
            display: block; 
            margin-bottom: 5px;
        }

        textarea { height: 80px; resize: vertical; }

        details {
            background: #fff;
            border: 1px solid #ddd;
            margin-bottom: 10px;
            border-radius: 5px;
        }

        summary {
            padding: 12px;
            background: #f1f2f6;
            cursor: pointer;
            font-weight: bold;
            list-style: none; /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø³Ù‡Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ */
            display: flex;
            justify-content: space-between;
        }
        
        summary::after { content: '+'; font-weight: bold; }
        details[open] summary::after { content: '-'; }

        .details-body { padding: 15px; }

        /* --- Ø£Ø²Ø±Ø§Ø± ÙˆÙ…Ù†ØªÙ‚ÙŠ Ø§Ù„Ø£Ù„ÙˆØ§Ù† --- */
        .color-row { display: flex; gap: 10px; justify-content: center; margin: 10px 0; flex-wrap: wrap;}
        .color-circle { width: 30px; height: 30px; border-radius: 50%; border: 2px solid #ddd; cursor: pointer; }
        .color-circle.active { border-color: #333; transform: scale(1.1); }

        .btn { width: 100%; padding: 12px; border: none; border-radius: 5px; color: white; font-weight: bold; cursor: pointer; margin-top: 10px; font-family: 'Cairo'; }
        .btn-green { background: var(--secondary); }
        .btn-print { background: var(--primary); font-size: 16px; position: sticky; bottom: 0; z-index: 200; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); }

        /* --- ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ù„Ù€ PDF --- */
        .cover-page { 
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
            height: 250mm; border: 5px double var(--primary); 
            background-color: var(--cover-bg); 
            text-align: center;
        }
        
        .page-title { border-bottom: 3px solid var(--primary); padding-bottom: 10px; margin-bottom: 30px; text-align: center; color: var(--primary); }
        
        .styled-list { list-style: none; padding: 0; }
        .styled-list li { margin-bottom: 12px; padding-right: 25px; position: relative; line-height: 1.6; }
        .styled-list li::before { content: 'âœ”'; position: absolute; right: 0; color: var(--secondary); }

        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; table-layout: fixed; }
        th, td { border: 1px solid #444; padding: 8px; text-align: center; font-size: 12px; word-wrap: break-word; }
        th { background: #eee; }

        /* Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø¹ÙŠÙ†Ø§Øª */
        .tools-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; text-align: center; }
        .tool-item { border: 1px solid #ccc; padding: 15px; border-radius: 10px; }

        /* ØµÙØ­Ø© ÙØ§Ø±ØºØ© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© (Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹) */
        @media print {
            .editor-sidebar { display: none; }
            .preview-area { margin: 0; padding: 0; width: 100%; background: white; }
            .sheet { box-shadow: none; margin: 0; page-break-after: always; width: 100%; }
        }

    </style>
</head>
<body>

<div class="app-container">
    
    <div class="editor-sidebar">
        <h3 style="text-align:center; margin-top:0;">ğŸ›  Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ù‚ÙŠØ¨Ø©</h3>
        
        <label>Ù„ÙˆÙ† Ø§Ù„ØºÙ„Ø§Ù:</label>
        <div class="color-row">
            <div class="color-circle" style="background:#fff;" onclick="setCover('#fff', this)"></div>
            <div class="color-circle" style="background:#fff9c4;" onclick="setCover('#fff9c4', this)"></div>
            <div class="color-circle" style="background:#e8f5e9;" onclick="setCover('#e8f5e9', this)"></div>
            <div class="color-circle" style="background:#ffebee;" onclick="setCover('#ffebee', this)"></div>
            <div class="color-circle" style="background:#e3f2fd;" onclick="setCover('#e3f2fd', this)"></div>
        </div>

        <details open><summary>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</summary>
            <div class="details-body">
                <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label><input type="text" id="inTitle" oninput="render()">
                <label>Ø§Ù„Ù…Ø¯Ø±Ø¨</label><input type="text" id="inTrainer" oninput="render()">
                <label>Ø§Ù„Ø¹Ø§Ù…</label><input type="text" id="inYear" value="2026" oninput="render()">
            </div>
        </details>

        <details><summary>Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© ÙˆØ§Ù„Ø¥Ø±Ø´Ø§Ø¯Ø§Øª</summary>
            <div class="details-body">
                <label>Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©</label><textarea id="inIntro" oninput="render()"></textarea>
                <hr>
                <label>Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø¨ (ÙƒÙ„ Ù†Ù‚Ø·Ø© ÙÙŠ Ø³Ø·Ø±)</label><textarea id="inTrainerGuide" oninput="render()"></textarea>
                <label>Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨ (ÙƒÙ„ Ù†Ù‚Ø·Ø© ÙÙŠ Ø³Ø·Ø±)</label><textarea id="inTraineeGuide" oninput="render()"></textarea>
            </div>
        </details>

        <details><summary>Ø§Ù„Ø£Ù‡Ø¯Ø§Ù</summary>
            <div class="details-body">
                <label>Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø¹Ø§Ù…</label><textarea id="inMainGoal" oninput="render()" style="height:50px"></textarea>
                <label>Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©</label><textarea id="inSubGoals" oninput="render()"></textarea>
            </div>
        </details>

        <details><summary>Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ (5 Ø£ÙŠØ§Ù…)</summary>
            <div class="details-body" id="schedule-inputs"></div> </details>

        <details><summary>Ø§Ù„Ù…Ø¹ÙŠÙ†Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©</summary>
            <div class="details-body">
                <label><input type="checkbox" id="t1" checked onchange="render()"> Ø³Ø¨ÙˆØ±Ø© ÙˆØ±Ù‚ÙŠØ©</label>
                <label><input type="checkbox" id="t2" checked onchange="render()"> Ø³Ø¨ÙˆØ±Ø© Ø°ÙƒÙŠØ©</label>
                <label><input type="checkbox" id="t3" checked onchange="render()"> Ø£Ù‚Ù„Ø§Ù… Ù…Ù„ÙˆÙ†Ø©</label>
                <label><input type="checkbox" id="t4" checked onchange="render()"> Ù…Ù„ØµÙ‚Ø§Øª</label>
                <label><input type="checkbox" id="t5" checked onchange="render()"> Ù„Ø§Ø¨ØªÙˆØ¨</label>
                <label><input type="checkbox" id="t6" checked onchange="render()"> Ø¯Ø§ØªØ§Ø´Ùˆ</label>
                <label><input type="checkbox" id="t7" onchange="render()"> Ù†Ø¸Ø§Ù… ØµÙˆØªÙŠ</label>
            </div>
        </details>

        <div id="units-container"></div>
        <button class="btn btn-green" onclick="addUnit()">+ Ø¥Ø¶Ø§ÙØ© ÙˆØ­Ø¯Ø©</button>

        <details style="margin-top:10px"><summary>Ø§Ù„Ø®Ø§ØªÙ…Ø© ÙˆØ§Ù„Ù…Ø±Ø§Ø¬Ø¹</summary>
            <div class="details-body">
                <label>Ø§Ù„Ø®Ø§ØªÙ…Ø©</label><textarea id="inConc" oninput="render()"></textarea>
                <label>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹</label><textarea id="inRef" oninput="render()"></textarea>
            </div>
        </details>

        <div style="height:20px"></div>
        <button class="btn btn-print" id="printBtn" onclick="printPDF()">ğŸ“¥ Ø­ÙØ¸ ÙƒÙ…Ù„Ù PDF</button>
    </div>

    <div class="preview-area">
        <div id="pdf-root">
            
            <div class="sheet">
                <div class="cover-page" id="coverPage">
                    <i class="fas fa-layer-group" style="font-size:80px; color:var(--primary); margin-bottom:30px; opacity:0.7;"></i>
                    <h1 id="outTitle" style="font-size:40px; color:var(--primary);">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø­Ù‚ÙŠØ¨Ø©</h1>
                    <h3 style="margin-top:50px; color:#555;">Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø¯Ø±Ø¨:</h3>
                    <h2 id="outTrainer" style="color:var(--secondary);">---</h2>
                    <p style="margin-top:20px;">Ø§Ù„Ø¹Ø§Ù… Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ: <span id="outYear">2026</span></p>
                </div>
            </div>

            <div class="sheet">
                <h2 class="page-title">Ù…Ù‚Ø¯Ù…Ø© Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</h2>
                <div id="outIntro" style="text-align:justify; line-height:1.8; font-size:16px;">...</div>
            </div>

            <div class="sheet">
                <h2 class="page-title">ğŸ‘¨â€ğŸ« Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ù„Ù„Ù…Ø¯Ø±Ø¨</h2>
                <p>Ù„Ø¶Ù…Ø§Ù† Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØŒ ÙŠØ±Ø¬Ù‰ Ø§ØªØ¨Ø§Ø¹ Ø§Ù„Ø¢ØªÙŠ:</p>
                <ul class="styled-list" id="outTrainerGuide"></ul>
            </div>

            <div class="sheet">
                <h2 class="page-title">ğŸ‘¥ Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ù„Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†</h2>
                <p>Ø¹Ø²ÙŠØ²ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØŒ Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø§Ø³ØªÙØ§Ø¯Ø© Ø§Ù„Ù‚ØµÙˆÙ‰:</p>
                <ul class="styled-list" id="outTraineeGuide"></ul>
            </div>

            <div class="sheet">
                <h2 class="page-title">Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</h2>
                <div style="background:#f9f9f9; padding:20px; border-right:5px solid var(--primary); margin-bottom:30px;">
                    <h3 style="margin:0; color:var(--primary)">ğŸ¯ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø¹Ø§Ù…:</h3>
                    <p id="outMainGoal" style="margin-top:10px;">...</p>
                </div>
                <h3>Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©:</h3>
                <ul class="styled-list" id="outSubGoals"></ul>
            </div>

            <div id="outSchedule"></div>

            <div class="sheet">
                <h2 class="page-title">Ø§Ù„Ù…Ø¹ÙŠÙ†Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©</h2>
                <div class="tools-grid" id="outTools"></div>
            </div>

            <div id="outUnits"></div>

            <div class="sheet">
                <h2 class="page-title">Ø§Ù„Ø®Ø§ØªÙ…Ø© ÙˆØ§Ù„Ù…Ø±Ø§Ø¬Ø¹</h2>
                <h3>Ø§Ù„Ø®Ø§ØªÙ…Ø©:</h3>
                <div id="outConc">...</div>
                <hr style="margin:40px 0">
                <h3>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹:</h3>
                <div id="outRef">...</div>
            </div>

            <div class="sheet">
                <div style="display:flex; justify-content:center; align-items:center; height:100%;">
                    <h1 style="font-size:60px; color:var(--primary);">ØªÙ… Ø¨Ø­Ù…Ø¯ Ø§Ù„Ù„Ù‡</h1>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    // --- ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© ---
    window.onload = function() {
        buildScheduleInputs();
        addUnit();
        setTimeout(render, 500);
    };

    // 1. Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø£Ù„ÙˆØ§Ù†
    function setCover(color, el) {
        document.documentElement.style.setProperty('--cover-bg', color);
        document.querySelectorAll('.color-circle').forEach(c => c.classList.remove('active'));
        el.classList.add('active');
    }

    // 2. Ø¨Ù†Ø§Ø¡ Ù…Ø¯Ø®Ù„Ø§Øª Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ
    function buildScheduleInputs() {
        const container = document.getElementById('schedule-inputs');
        for(let d=1; d<=5; d++) {
            let html = `<div style="border:1px solid #ddd; padding:10px; margin-bottom:10px; border-radius:5px;">
                <div style="font-weight:bold; margin-bottom:5px;">Ø§Ù„ÙŠÙˆÙ… ${d}</div>`;
            
            // Ø¬Ù„Ø³ØªÙŠÙ†ØŒ ÙƒÙ„ Ø¬Ù„Ø³Ø© 4 ØµÙÙˆÙ
            for(let s=1; s<=2; s++) {
                html += `<div style="background:#eee; padding:5px; font-size:12px; margin-top:5px;">Ø§Ù„Ø¬Ù„Ø³Ø© ${s}</div>`;
                for(let r=1; r<=4; r++) {
                    let id = `d${d}s${s}r${r}`;
                    html += `<div style="display:flex; gap:2px; margin-top:2px;">
                        <input class="${id}_t" placeholder="Ù…ÙˆØ¶ÙˆØ¹" oninput="render()" style="flex:2">
                        <input class="${id}_m" placeholder="Ø£Ø³Ù„ÙˆØ¨" oninput="render()" style="flex:1">
                        <input class="${id}_l" placeholder="Ø£Ø¯Ø§Ø©" oninput="render()" style="flex:1">
                        <input class="${id}_z" placeholder="Ø¯Ù‚ÙŠÙ‚Ø©" oninput="render()" style="flex:0.5">
                    </div>`;
                }
            }
            html += `</div>`;
            container.innerHTML += html;
        }
    }

    // 3. Ø¥Ø¶Ø§ÙØ© ÙˆØ­Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©
    let uCount = 0;
    function addUnit() {
        uCount++;
        const div = document.createElement('div');
        div.innerHTML = `
            <div style="background:#7f8c8d; color:white; padding:5px; margin-top:15px; display:flex; justify-content:space-between;">
                <span>ÙˆØ­Ø¯Ø© ${uCount}</span>
                <span onclick="this.parentElement.parentElement.remove(); render()" style="cursor:pointer; background:red; padding:0 5px;">x</span>
            </div>
            <input class="u-title" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†" oninput="render()">
            <textarea class="u-cont" placeholder="Ø§Ù„Ù…Ø­ØªÙˆÙ‰" oninput="render()"></textarea>
            <textarea class="u-act" placeholder="Ø§Ù„Ù†Ø´Ø§Ø·" oninput="render()"></textarea>
            <textarea class="u-eval" placeholder="Ø§Ù„ØªÙ‚ÙŠÙŠÙ…" oninput="render()"></textarea>
        `;
        document.getElementById('units-container').appendChild(div);
        render();
    }

    // 4. Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ« (Render)
    function render() {
        // Ù†ØµÙˆØµ
        setId('outTitle', 'inTitle', 'Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø­Ù‚ÙŠØ¨Ø©');
        setId('outTrainer', 'inTrainer', '---');
        setId('outYear', 'inYear', '---');
        setHtml('outIntro', 'inIntro');
        setList('outTrainerGuide', 'inTrainerGuide');
        setList('outTraineeGuide', 'inTraineeGuide');
        setHtml('outMainGoal', 'inMainGoal');
        setList('outSubGoals', 'inSubGoals');
        setHtml('outConc', 'inConc');
        setHtml('outRef', 'inRef');

        // Ø¬Ø¯Ø§ÙˆÙ„
        let schHtml = '';
        for(let d=1; d<=5; d++) {
            schHtml += `<div class="sheet"><h2 class="page-title">Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ: ${d}</h2>
            <table><thead><tr><th width="35%">Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹</th><th>Ø§Ù„Ø£Ø³Ù„ÙˆØ¨</th><th>Ø§Ù„Ø£Ø¯Ø§Ø©</th><th width="10%">Ø²Ù…Ù†</th></tr></thead><tbody>`;
            
            for(let s=1; s<=2; s++) {
                schHtml += `<tr><td colspan="4" style="background:#e0f2f1; font-weight:bold;">Ø§Ù„Ø¬Ù„Ø³Ø© ${s}</td></tr>`;
                for(let r=1; r<=4; r++) {
                    let id = `d${d}s${s}r${r}`;
                    let t = document.querySelector(`.${id}_t`)?.value || '';
                    let m = document.querySelector(`.${id}_m`)?.value || '';
                    let l = document.querySelector(`.${id}_l`)?.value || '';
                    let z = document.querySelector(`.${id}_z`)?.value || '';
                    if(t||m||l||z) schHtml += `<tr><td>${t}</td><td>${m}</td><td>${l}</td><td>${z}</td></tr>`;
                }
                if(s==1) schHtml += `<tr><td colspan="4" style="background:#fff3e0">Ø§Ø³ØªØ±Ø§Ø­Ø©</td></tr>`;
            }
            schHtml += `</tbody></table></div>`;
        }
        document.getElementById('outSchedule').innerHTML = schHtml;

        // ÙˆØ­Ø¯Ø§Øª
        let uHtml = '';
        document.querySelectorAll('#units-container > div').forEach(div => {
            let t = div.querySelector('.u-title').value || 'ÙˆØ­Ø¯Ø©';
            let c = div.querySelector('.u-cont').value.replace(/\n/g, '<br>');
            let a = div.querySelector('.u-act').value.replace(/\n/g, '<br>');
            let e = div.querySelector('.u-eval').value.replace(/\n/g, '<br>');
            
            uHtml += `<div class="sheet"><h2 class="page-title">${t}</h2>
                <h4>Ø§Ù„Ù…Ø­ØªÙˆÙ‰:</h4><p style="text-align:justify">${c}</p>
                <div style="background:#f4f4f4; padding:10px; border:1px dashed #999; margin:10px 0;"><b>Ù†Ø´Ø§Ø·:</b><br>${a}</div>
                <div style="color:#d35400"><b>ØªÙ‚ÙŠÙŠÙ…:</b><br>${e}</div>
            </div>`;
        });
        document.getElementById('outUnits').innerHTML = uHtml;

        // Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª
        const icons = [
            {id:'t1', i:'fa-scroll', t:'Ø³Ø¨ÙˆØ±Ø© ÙˆØ±Ù‚ÙŠØ©'}, {id:'t2', i:'fa-chalkboard-user', t:'Ø³Ø¨ÙˆØ±Ø© Ø°ÙƒÙŠØ©'},
            {id:'t3', i:'fa-pen-nib', t:'Ø£Ù‚Ù„Ø§Ù…'}, {id:'t4', i:'fa-note-sticky', t:'Ù…Ù„ØµÙ‚Ø§Øª'},
            {id:'t5', i:'fa-laptop', t:'Ù„Ø§Ø¨ØªÙˆØ¨'}, {id:'t6', i:'fa-video', t:'Ø¯Ø§ØªØ§Ø´Ùˆ'}, {id:'t7', i:'fa-volume-high', t:'ØµÙˆØªÙŠØ§Øª'}
        ];
        let icHtml = '';
        icons.forEach(ic => {
            if(document.getElementById(ic.id).checked) icHtml += `<div class="tool-item"><i class="fas ${ic.i}" style="font-size:40px; color:var(--primary)"></i><br>${ic.t}</div>`;
        });
        document.getElementById('outTools').innerHTML = icHtml;
    }

    // Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
    function setId(o, i, d) { document.getElementById(o).innerText = document.getElementById(i).value || d; }
    function setHtml(o, i) { document.getElementById(o).innerHTML = document.getElementById(i).value.replace(/\n/g, '<br>') || '...'; }
    function setList(o, i) { 
        let v = document.getElementById(i).value;
        document.getElementById(o).innerHTML = v ? v.split('\n').map(x=>`<li>${x}</li>`).join('') : '';
    }

    // --- Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© ---
    function printPDF() {
        const btn = document.getElementById('printBtn');
        btn.innerHTML = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ¬Ù‡ÙŠØ²...';
        
        // Ù†Ø£Ø®Ø° Ù†Ø³Ø®Ø© Ø·Ø¨Ù‚ Ø§Ù„Ø£ØµÙ„ Ù…Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰
        const element = document.getElementById('pdf-root').cloneNode(true);
        
        // Ø¥Ø¬Ø¨Ø§Ø± Ø§Ù„Ù†Ø³Ø®Ø© Ø¹Ù„Ù‰ Ø£Ù† ØªÙƒÙˆÙ† Ø¨Ø¹Ø±Ø¶ A4 Ø¨Ø§Ù„Ø¶Ø¨Ø·
        element.style.width = '210mm';
        element.style.padding = '0';
        element.style.margin = '0';
        
        // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„ØªØ­Ø¬ÙŠÙ… (Scale) Ù„ÙŠÙƒÙˆÙ† Ø·Ø¨ÙŠØ¹ÙŠØ§Ù‹ 100%
        // Ù„Ø£Ù†Ù†Ø§ ÙÙŠ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ù‚Ù…Ù†Ø§ Ø¨ØªØµØºÙŠØ±Ù‡ØŒ Ù‡Ù†Ø§ Ù†Ø¹ÙŠØ¯Ù‡ Ù„Ø£ØµÙ„Ù‡
        const sheets = element.querySelectorAll('.sheet');
        sheets.forEach(sheet => {
            sheet.style.transform = 'none'; 
            sheet.style.margin = '0';
            sheet.style.marginBottom = '0';
            sheet.style.pageBreakAfter = 'always';
        });

        const opt = {
            margin: 0,
            filename: 'Ø§Ù„Ø­Ù‚ÙŠØ¨Ø©_Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2, useCORS: true, scrollY: 0 },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };

        html2pdf().from(element).set(opt).save().then(() => {
            btn.innerHTML = 'ğŸ“¥ Ø­ÙØ¸ ÙƒÙ…Ù„Ù PDF';
        });
    }
</script>

</body>
</html>

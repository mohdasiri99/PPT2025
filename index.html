<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†Ø´Ø¦ Ø§Ù„Ø­Ù‚Ø§Ø¦Ø¨ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ - Ù†Ø³Ø®Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ§Ø³Ø¹</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #16a085;
            --accent: #d35400;
            --bg: #eef2f3;
            --cover-bg: #ffffff;
            --sidebar-width: 550px; /* ØªÙ… ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ù‡Ù†Ø§ */
        }

        * { box-sizing: border-box; }

        body { 
            font-family: 'Cairo', sans-serif; 
            background: var(--bg); 
            margin: 0; 
            padding: 0; 
            overflow-x: hidden; 
        }

        .app-container {
            display: flex;
            flex-direction: row;
            min-height: 100vh;
        }

        /* --- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ø§Ù„Ù…Ø­Ø±Ø±) - ØªÙ… Ø§Ù„ØªÙˆØ³ÙŠØ¹ --- */
        .editor-sidebar {
            width: var(--sidebar-width); /* Ø¹Ø±Ø¶ Ø£ÙˆØ³Ø¹ */
            background: white;
            padding: 25px; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù‡ÙˆØ§Ù…Ø´ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© */
            border-left: 2px solid #ddd;
            overflow-y: auto;
            height: 100vh;
            position: fixed;
            right: 0;
            top: 0;
            z-index: 100;
            box-shadow: -2px 0 15px rgba(0,0,0,0.1);
        }

        /* --- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© --- */
        .preview-area {
            margin-right: var(--sidebar-width); /* Ø¥Ø²Ø§Ø­Ø© Ø¨Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
            width: calc(100% - var(--sidebar-width));
            background: #525659;
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* --- Ø§Ù„ÙˆØ±Ù‚Ø© --- */
        .sheet {
            background: white;
            width: 210mm;
            min-height: 297mm;
            padding: 20mm;
            margin-bottom: 30px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            position: relative;
            overflow: visible; 
            page-break-after: always;
        }

        /* --- ØªØ¬Ø§ÙˆØ¨ Ø§Ù„Ø¬ÙˆØ§Ù„ ÙˆØ§Ù„Ù„Ø§Ø¨ØªÙˆØ¨ Ø§Ù„ØµØºÙŠØ± --- */
        /* Ø±ÙØ¹Ù†Ø§ Ø­Ø¯ Ø§Ù„ØªØ¬Ø§ÙˆØ¨ Ù„Ù€ 1100 Ø¨ÙƒØ³Ù„ Ù„Ø£Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£ØµØ¨Ø­Øª Ø£Ø¹Ø±Ø¶ */
        @media (max-width: 1100px) {
            .app-container { flex-direction: column; }
            
            .editor-sidebar { 
                width: 100%; 
                height: auto; 
                position: relative; 
                border-left: none; 
                padding-bottom: 60px; /* Ù…Ø³Ø§Ø­Ø© Ù„Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
            }

            .preview-area { 
                width: 100%; 
                margin-right: 0; 
                padding: 10px; 
                overflow-x: auto; 
            }

            .sheet { 
                transform: scale(0.9); 
                transform-origin: top center; 
                margin-bottom: 10px; 
            }
        }

        /* --- ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª --- */
        label { 
            display: block; 
            margin-top: 15px; 
            margin-bottom: 8px; 
            font-weight: bold; 
            font-size: 15px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø· Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
            color: var(--primary); 
        }

        input, textarea, select { 
            width: 100%; 
            padding: 12px; /* Ø®Ø§Ù†Ø§Øª Ø£ÙƒØ¨Ø± ÙˆØ£Ø±ÙŠØ­ */
            border: 1px solid #ccc; 
            border-radius: 6px; 
            font-family: 'Cairo'; 
            font-size: 14px; 
            background: #fcfcfc; 
            display: block; 
            margin-bottom: 8px; 
        }

        input:focus, textarea:focus {
            border-color: var(--secondary);
            background: #fff;
            outline: none;
            box-shadow: 0 0 5px rgba(22, 160, 133, 0.2);
        }

        textarea { height: 80px; resize: vertical; }

        details { background: #fff; border: 1px solid #ddd; margin-bottom: 15px; border-radius: 8px; overflow: hidden; }
        summary { padding: 15px; background: #f8f9fa; cursor: pointer; font-weight: bold; list-style: none; display: flex; justify-content: space-between; font-size: 16px; }
        summary::after { content: '+'; font-weight: bold; font-size: 18px; }
        details[open] summary::after { content: '-'; }
        .details-body { padding: 20px; border-top: 1px solid #eee; }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø®Ø§Øµ Ù„Ù…Ø¯Ø®Ù„Ø§Øª Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ */
        .schedule-row-inputs {
            display: flex; 
            gap: 5px; 
            align-items: center;
        }
        .schedule-row-inputs input {
            margin-bottom: 0;
            font-size: 13px;
        }

        /* Ø§Ù„Ø£Ù„ÙˆØ§Ù† */
        .color-row { display: flex; gap: 15px; justify-content: center; margin: 15px 0; flex-wrap: wrap;}
        .color-circle { width: 35px; height: 35px; border-radius: 50%; border: 3px solid #eee; cursor: pointer; transition: 0.2s; }
        .color-circle:hover { transform: scale(1.1); }
        .color-circle.active { border-color: #333; transform: scale(1.1); box-shadow: 0 2px 5px rgba(0,0,0,0.2); }

        .btn { width: 100%; padding: 14px; border: none; border-radius: 6px; color: white; font-weight: bold; cursor: pointer; margin-top: 15px; font-family: 'Cairo'; font-size: 16px; transition: 0.3s; }
        .btn:hover { opacity: 0.9; }
        .btn-green { background: var(--secondary); }
        .btn-print { background: var(--primary); position: sticky; bottom: 10px; z-index: 200; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }

        /* --- Ø¯Ø§Ø®Ù„ PDF --- */
        .cover-page { display: flex; flex-direction: column; justify-content: center; align-items: center; height: 250mm; border: 5px double var(--primary); background-color: var(--cover-bg); text-align: center; }
        .page-title { border-bottom: 3px solid var(--primary); padding-bottom: 10px; margin-bottom: 30px; text-align: center; color: var(--primary); }
        .styled-list { list-style: none; padding: 0; }
        .styled-list li { margin-bottom: 12px; padding-right: 25px; position: relative; line-height: 1.6; }
        .styled-list li::before { content: 'âœ”'; position: absolute; right: 0; color: var(--secondary); }
        
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; table-layout: fixed; }
        th, td { border: 1px solid #444; padding: 8px; text-align: center; font-size: 12px; word-wrap: break-word; }
        th { background: #eee; }
        
        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø£Ø¯ÙˆØ§Øª */
        .tools-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; text-align: center; }
        .tool-item { border: 1px solid #ccc; padding: 20px; border-radius: 10px; background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }

        @media print {
            .editor-sidebar { display: none; }
            .preview-area { margin: 0; padding: 0; width: 100%; background: white; }
            .sheet { box-shadow: none; margin: 0; page-break-after: always; width: 100%; }
        }
    </style>
</head>
<body>

<div class="app-container">
    
    <div class="editor-sidebar">
        <h2 style="text-align:center; margin-top:0; color:var(--primary);">ğŸ›  Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ù‚ÙŠØ¨Ø©</h2>
        
        <div style="background:#f4f4f4; padding:15px; border-radius:10px; text-align:center;">
            <label style="margin-top:0;">Ø§Ø®ØªØ± Ù„ÙˆÙ† ØºÙ„Ø§Ù Ø§Ù„Ø­Ù‚ÙŠØ¨Ø©:</label>
            <div class="color-row">
                <div class="color-circle" style="background:#fff;" onclick="setCover('#fff', this)"></div>
                <div class="color-circle" style="background:#fff9c4;" onclick="setCover('#fff9c4', this)"></div>
                <div class="color-circle" style="background:#e8f5e9;" onclick="setCover('#e8f5e9', this)"></div>
                <div class="color-circle" style="background:#ffebee;" onclick="setCover('#ffebee', this)"></div>
                <div class="color-circle" style="background:#e3f2fd;" onclick="setCover('#e3f2fd', this)"></div>
            </div>
        </div>

        <br>

        <details open><summary>ğŸ“ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</summary>
            <div class="details-body">
                <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ</label>
                <input type="text" id="inTitle" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø­Ø¯ÙŠØ«Ø©" oninput="render()">
                
                <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø¨</label>
                <input type="text" id="inTrainer" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ" oninput="render()">
                
                <label>Ø§Ù„Ø¹Ø§Ù… Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ</label>
                <input type="text" id="inYear" value="2026" oninput="render()">
            </div>
        </details>

        <details><summary>ğŸ“„ Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© ÙˆØ§Ù„Ø¥Ø±Ø´Ø§Ø¯Ø§Øª</summary>
            <div class="details-body">
                <label>Ù…Ù‚Ø¯Ù…Ø© Ø§Ù„Ø­Ù‚ÙŠØ¨Ø©</label>
                <textarea id="inIntro" placeholder="Ø§ÙƒØªØ¨ Ù…Ù‚Ø¯Ù…Ø© Ø¹Ø§Ù…Ø©..." oninput="render()"></textarea>
                <hr style="margin:20px 0; border:0; border-top:1px dashed #ccc;">
                <label>Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø¨ (ÙƒÙ„ Ù†Ù‚Ø·Ø© ÙÙŠ Ø³Ø·Ø±)</label>
                <textarea id="inTrainerGuide" placeholder="- Ø§Ù„Ø­Ø¶ÙˆØ± Ù…Ø¨ÙƒØ±Ø§Ù‹&#10;- ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù‚Ø§Ø¹Ø©" oninput="render()"></textarea>
                
                <label>Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨ (ÙƒÙ„ Ù†Ù‚Ø·Ø© ÙÙŠ Ø³Ø·Ø±)</label>
                <textarea id="inTraineeGuide" placeholder="- Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„ÙˆÙ‚Øª&#10;- Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ÙØ¹Ø§Ù„Ø©" oninput="render()"></textarea>
            </div>
        </details>

        <details><summary>ğŸ¯ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù</summary>
            <div class="details-body">
                <label>Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø¹Ø§Ù…</label>
                <textarea id="inMainGoal" oninput="render()" style="height:60px" placeholder="Ù…Ø§ Ø§Ù„Ø°ÙŠ Ø³ÙŠØªØ­Ù‚Ù‚ Ø¨Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ØŸ"></textarea>
                
                <label>Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ© (ÙƒÙ„ Ù‡Ø¯Ù ÙÙŠ Ø³Ø·Ø±)</label>
                <textarea id="inSubGoals" oninput="render()" placeholder="1. Ø£Ù† ÙŠØªØ¹Ø±Ù Ø§Ù„Ù…ØªØ¯Ø±Ø¨ Ø¹Ù„Ù‰...&#10;2. Ø£Ù† ÙŠØ·Ø¨Ù‚ Ø§Ù„Ù…ØªØ¯Ø±Ø¨..."></textarea>
            </div>
        </details>

        <details><summary>ğŸ“… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ (ÙˆØ§Ø³Ø¹ ÙˆÙ…Ø±ÙŠØ­)</summary>
            <div class="details-body" id="schedule-inputs"></div>
        </details>

        <details><summary>ğŸ›  Ø§Ù„Ù…Ø¹ÙŠÙ†Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©</summary>
            <div class="details-body">
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <label><input type="checkbox" id="t1" checked onchange="render()"> Ø³Ø¨ÙˆØ±Ø© ÙˆØ±Ù‚ÙŠØ©</label>
                    <label><input type="checkbox" id="t2" checked onchange="render()"> Ø³Ø¨ÙˆØ±Ø© Ø°ÙƒÙŠØ©</label>
                    <label><input type="checkbox" id="t3" checked onchange="render()"> Ø£Ù‚Ù„Ø§Ù… Ù…Ù„ÙˆÙ†Ø©</label>
                    <label><input type="checkbox" id="t4" checked onchange="render()"> Ù…Ù„ØµÙ‚Ø§Øª</label>
                    <label><input type="checkbox" id="t5" checked onchange="render()"> Ù„Ø§Ø¨ØªÙˆØ¨</label>
                    <label><input type="checkbox" id="t6" checked onchange="render()"> Ø¯Ø§ØªØ§Ø´Ùˆ</label>
                    <label><input type="checkbox" id="t7" onchange="render()"> Ù†Ø¸Ø§Ù… ØµÙˆØªÙŠ</label>
                </div>
                <div style="margin-top:15px; padding-top:15px; border-top:1px dashed #ccc;">
                    <label>Ø£Ø®Ø±Ù‰ (Ø£Ø¯ÙˆØ§Øª Ø¥Ø¶Ø§ÙÙŠØ©):</label>
                    <input type="text" id="tOther" placeholder="Ø£Ø¶Ù Ø£Ø¯Ø§Ø© Ø£Ø®Ø±Ù‰ ÙˆØ§Ø¶ØºØ· Ø§Ù†ØªØ±..." oninput="render()">
                </div>
            </div>
        </details>

        <div id="units-container"></div>
        <button class="btn btn-green" onclick="addUnit()">+ Ø¥Ø¶Ø§ÙØ© ÙˆØ­Ø¯Ø© ØªØ¯Ø±ÙŠØ¨ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</button>

        <details style="margin-top:15px"><summary>ğŸ”š Ø§Ù„Ø®Ø§ØªÙ…Ø© ÙˆØ§Ù„Ù…Ø±Ø§Ø¬Ø¹</summary>
            <div class="details-body">
                <label>Ø§Ù„Ø®Ø§ØªÙ…Ø©</label><textarea id="inConc" oninput="render()"></textarea>
                <label>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹</label><textarea id="inRef" oninput="render()"></textarea>
            </div>
        </details>

        <div style="height:30px"></div>
        <button class="btn btn-print" id="printBtn" onclick="printPDF()">ğŸ“¥ Ø­ÙØ¸ ÙƒÙ…Ù„Ù PDF Ø¬Ø§Ù‡Ø² Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©</button>
    </div>

    <div class="preview-area">
        <div id="pdf-root">
            
            <div class="sheet">
                <div class="cover-page" id="coverPage">
                    <i class="fas fa-layer-group" style="font-size:100px; color:var(--primary); margin-bottom:40px; opacity:0.8;"></i>
                    <h1 id="outTitle" style="font-size:48px; color:var(--primary); margin: 0 20px;">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø­Ù‚ÙŠØ¨Ø©</h1>
                    <h3 style="margin-top:60px; color:#555; font-size:24px;">Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø¯Ø±Ø¨:</h3>
                    <h2 id="outTrainer" style="color:var(--secondary); font-size:32px;">---</h2>
                    <p style="margin-top:30px; font-size:18px;">Ø§Ù„Ø¹Ø§Ù… Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ: <span id="outYear">2026</span></p>
                </div>
            </div>

            <div class="sheet">
                <h2 class="page-title">Ù…Ù‚Ø¯Ù…Ø© Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</h2>
                <div id="outIntro" style="text-align:justify; line-height:2; font-size:16px;">...</div>
            </div>

            <div class="sheet">
                <h2 class="page-title">ğŸ‘¨â€ğŸ« Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ù„Ù„Ù…Ø¯Ø±Ø¨</h2>
                <ul class="styled-list" id="outTrainerGuide"></ul>
            </div>

            <div class="sheet">
                <h2 class="page-title">ğŸ‘¥ Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ù„Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†</h2>
                <ul class="styled-list" id="outTraineeGuide"></ul>
            </div>

            <div class="sheet">
                <h2 class="page-title">Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</h2>
                <div style="background:#fcfcfc; padding:25px; border-right:6px solid var(--primary); margin-bottom:40px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                    <h3 style="margin:0; color:var(--primary); font-size:20px;">ğŸ¯ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø¹Ø§Ù…:</h3>
                    <p id="outMainGoal" style="margin-top:15px; font-size:16px; line-height:1.6;">...</p>
                </div>
                <h3 style="font-size:22px;">Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©:</h3>
                <ul class="styled-list" id="outSubGoals" style="font-size:16px;"></ul>
            </div>

            <div id="outSchedule"></div>

            <div class="sheet">
                <h2 class="page-title">Ø§Ù„Ù…Ø¹ÙŠÙ†Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©</h2>
                <div class="tools-grid" id="outTools"></div>
            </div>

            <div id="outUnits"></div>

            <div class="sheet">
                <h2 class="page-title">Ø§Ù„Ø®Ø§ØªÙ…Ø© ÙˆØ§Ù„Ù…Ø±Ø§Ø¬Ø¹</h2>
                <h3>Ø§Ù„Ø®Ø§ØªÙ…Ø©:</h3>
                <div id="outConc" style="text-align:justify; line-height:1.8;">...</div>
                <hr style="margin:50px 0; border-top:1px solid #eee;">
                <h3>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹:</h3>
                <div id="outRef">...</div>
            </div>

            <div class="sheet">
                <div style="display:flex; justify-content:center; align-items:center; height:100%;">
                    <h1 style="font-size:70px; color:var(--primary);">ØªÙ… Ø¨Ø­Ù…Ø¯ Ø§Ù„Ù„Ù‡</h1>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    window.onload = function() {
        buildScheduleInputs();
        addUnit();
        setTimeout(render, 500);
    };

    function setCover(color, el) {
        document.documentElement.style.setProperty('--cover-bg', color);
        document.querySelectorAll('.color-circle').forEach(c => c.classList.remove('active'));
        el.classList.add('active');
    }

    function buildScheduleInputs() {
        const container = document.getElementById('schedule-inputs');
        for(let d=1; d<=5; d++) {
            // ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙŠÙˆÙ…
            let html = `<div style="background:#fbfbfb; border:1px solid #e0e0e0; padding:15px; margin-bottom:15px; border-radius:8px;">
                <div style="font-weight:bold; margin-bottom:10px; color:var(--primary); font-size:16px;">Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ ${d}</div>`;
            
            for(let s=1; s<=2; s++) {
                // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¬Ù„Ø³Ø©
                html += `<div style="background:#e8ecef; padding:8px; font-size:13px; margin-top:10px; font-weight:bold; border-radius:4px;">Ø§Ù„Ø¬Ù„Ø³Ø© ${s}</div>`;
                // 4 ØµÙÙˆÙ (Ù…Ø­Ø§ÙˆØ±)
                for(let r=1; r<=4; r++) {
                    let id = `d${d}s${s}r${r}`;
                    // ØµÙ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª - ÙˆØ§Ø³Ø¹ Ø§Ù„Ø¢Ù†
                    html += `<div class="schedule-row-inputs" style="margin-top:5px;">
                        <input class="${id}_t" placeholder="Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹" oninput="render()" style="flex:2.5;">
                        <input class="${id}_m" placeholder="Ø§Ù„Ø£Ø³Ù„ÙˆØ¨" oninput="render()" style="flex:1.5;">
                        <input class="${id}_l" placeholder="Ø§Ù„Ø£Ø¯Ø§Ø©" oninput="render()" style="flex:1.5;">
                        <input class="${id}_z" placeholder="Ø¯Ù‚ÙŠÙ‚Ø©" oninput="render()" style="flex:0.8;">
                    </div>`;
                }
            }
            html += `</div>`;
            container.innerHTML += html;
        }
    }

    let uCount = 0;
    function addUnit() {
        uCount++;
        const div = document.createElement('div');
        div.style.marginBottom = "15px";
        div.innerHTML = `
            <div style="background:#34495e; color:white; padding:10px; margin-top:20px; border-radius:6px 6px 0 0; display:flex; justify-content:space-between; align-items:center;">
                <span style="font-weight:bold;">ÙˆØ­Ø¯Ø© ØªÙØµÙŠÙ„ÙŠØ© Ø±Ù‚Ù… ${uCount}</span>
                <button onclick="this.parentElement.parentElement.remove(); render()" style="background:#e74c3c; color:white; border:none; padding:5px 10px; border-radius:4px; cursor:pointer; font-size:12px;">Ø­Ø°Ù</button>
            </div>
            <div style="border:1px solid #ddd; border-top:none; padding:15px; background:white; border-radius:0 0 6px 6px;">
                <input class="u-title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ­Ø¯Ø©" oninput="render()">
                <textarea class="u-cont" placeholder="Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¹Ù„Ù…ÙŠ (ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙˆØ­Ø¯Ø©)" oninput="render()"></textarea>
                <textarea class="u-act" placeholder="Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ Ø§Ù„Ù…Ù‚ØªØ±Ø­" oninput="render()"></textarea>
                <textarea class="u-eval" placeholder="Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…" oninput="render()"></textarea>
            </div>
        `;
        document.getElementById('units-container').appendChild(div);
        render();
    }

    function render() {
        setId('outTitle', 'inTitle', 'Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø­Ù‚ÙŠØ¨Ø©');
        setId('outTrainer', 'inTrainer', '---');
        setId('outYear', 'inYear', '---');
        setHtml('outIntro', 'inIntro');
        setList('outTrainerGuide', 'inTrainerGuide');
        setList('outTraineeGuide', 'inTraineeGuide');
        setHtml('outMainGoal', 'inMainGoal');
        setList('outSubGoals', 'inSubGoals');
        setHtml('outConc', 'inConc');
        setHtml('outRef', 'inRef');

        let schHtml = '';
        for(let d=1; d<=5; d++) {
            schHtml += `<div class="sheet"><h2 class="page-title">Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ: ${d}</h2>
            <table><thead><tr><th width="35%">Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹</th><th>Ø§Ù„Ø£Ø³Ù„ÙˆØ¨</th><th>Ø§Ù„Ø£Ø¯Ø§Ø©</th><th width="10%">Ø²Ù…Ù†</th></tr></thead><tbody>`;
            for(let s=1; s<=2; s++) {
                schHtml += `<tr><td colspan="4" style="background:#e0f2f1; font-weight:bold;">Ø§Ù„Ø¬Ù„Ø³Ø© ${s}</td></tr>`;
                for(let r=1; r<=4; r++) {
                    let id = `d${d}s${s}r${r}`;
                    let t = document.querySelector(`.${id}_t`)?.value || '';
                    let m = document.querySelector(`.${id}_m`)?.value || '';
                    let l = document.querySelector(`.${id}_l`)?.value || '';
                    let z = document.querySelector(`.${id}_z`)?.value || '';
                    if(t||m||l||z) schHtml += `<tr><td>${t}</td><td>${m}</td><td>${l}</td><td>${z}</td></tr>`;
                }
                if(s==1) schHtml += `<tr><td colspan="4" style="background:#fff3e0">Ø§Ø³ØªØ±Ø§Ø­Ø©</td></tr>`;
            }
            schHtml += `</tbody></table></div>`;
        }
        document.getElementById('outSchedule').innerHTML = schHtml;

        let uHtml = '';
        document.querySelectorAll('#units-container > div').forEach(div => {
            let t = div.querySelector('.u-title').value || 'ÙˆØ­Ø¯Ø©';
            let c = div.querySelector('.u-cont').value.replace(/\n/g, '<br>');
            let a = div.querySelector('.u-act').value.replace(/\n/g, '<br>');
            let e = div.querySelector('.u-eval').value.replace(/\n/g, '<br>');
            uHtml += `<div class="sheet"><h2 class="page-title">${t}</h2>
                <h4>Ø§Ù„Ù…Ø­ØªÙˆÙ‰:</h4><p style="text-align:justify">${c}</p>
                <div style="background:#f4f4f4; padding:15px; border:1px dashed #999; margin:15px 0; border-radius:5px;"><b>Ù†Ø´Ø§Ø· Ù…Ù‚ØªØ±Ø­:</b><br>${a}</div>
                <div style="color:#d35400"><b>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…:</b><br>${e}</div>
            </div>`;
        });
        document.getElementById('outUnits').innerHTML = uHtml;

        const icons = [
            {id:'t1', i:'fa-scroll', t:'Ø³Ø¨ÙˆØ±Ø© ÙˆØ±Ù‚ÙŠØ©'}, {id:'t2', i:'fa-chalkboard-user', t:'Ø³Ø¨ÙˆØ±Ø© Ø°ÙƒÙŠØ©'},
            {id:'t3', i:'fa-pen-nib', t:'Ø£Ù‚Ù„Ø§Ù…'}, {id:'t4', i:'fa-note-sticky', t:'Ù…Ù„ØµÙ‚Ø§Øª'},
            {id:'t5', i:'fa-laptop', t:'Ù„Ø§Ø¨ØªÙˆØ¨'}, {id:'t6', i:'fa-video', t:'Ø¯Ø§ØªØ§Ø´Ùˆ'}, {id:'t7', i:'fa-volume-high', t:'ØµÙˆØªÙŠØ§Øª'}
        ];
        let icHtml = '';
        icons.forEach(ic => {
            if(document.getElementById(ic.id).checked) icHtml += `<div class="tool-item"><i class="fas ${ic.i}" style="font-size:40px; color:var(--primary)"></i><br>${ic.t}</div>`;
        });

        let otherTool = document.getElementById('tOther').value;
        if(otherTool) {
            icHtml += `<div class="tool-item"><i class="fas fa-plus-circle" style="font-size:40px; color:var(--accent)"></i><br>${otherTool}</div>`;
        }
        document.getElementById('outTools').innerHTML = icHtml;
    }

    function setId(o, i, d) { document.getElementById(o).innerText = document.getElementById(i).value || d; }
    function setHtml(o, i) { document.getElementById(o).innerHTML = document.getElementById(i).value.replace(/\n/g, '<br>') || '...'; }
    function setList(o, i) { 
        let v = document.getElementById(i).value;
        document.getElementById(o).innerHTML = v ? v.split('\n').map(x=>`<li>${x}</li>`).join('') : '';
    }

    function printPDF() {
        const btn = document.getElementById('printBtn');
        btn.innerHTML = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ¬Ù‡ÙŠØ²...';
        
        const element = document.getElementById('pdf-root').cloneNode(true);
        element.style.width = '210mm';
        element.style.padding = '0';
        element.style.margin = '0';
        
        const sheets = element.querySelectorAll('.sheet');
        sheets.forEach(sheet => {
            sheet.style.transform = 'none'; 
            sheet.style.margin = '0';
            sheet.style.marginBottom = '0';
            sheet.style.pageBreakAfter = 'always';
        });

        const opt = {
            margin: 0,
            filename: 'Ø§Ù„Ø­Ù‚ÙŠØ¨Ø©_Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2, useCORS: true, scrollY: 0 },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };

        html2pdf().from(element).set(opt).save().then(() => {
            btn.innerHTML = 'ğŸ“¥ Ø­ÙØ¸ ÙƒÙ…Ù„Ù PDF Ø¬Ø§Ù‡Ø² Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©';
        });
    }
</script>

</body>
</html>
